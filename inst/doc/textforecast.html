<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="date" content="2019-03-06" />

<title>TextForecast R package documentation</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">TextForecast R package documentation</h1>
<h4 class="author"><em>Luiz Renato Lima</em></h4>
<address class="author_afil">
Department of Economics, University of Tennessee, Knoxville, United States and Department of Economics, Federal University of Paraiba, Brazil.<br><a class="author_email" href="mailto:#"><a href="mailto:llima@utk.edu" class="email">llima@utk.edu</a></a>
</address>
<h4 class="author"><em>Lucas Godeiro</em></h4>
<address class="author_afil">
Department of Applied Social Sciences, Federal Rural University of the Semi-arid Region – UFERSA, Brazil.<br><a class="author_email" href="mailto:#"><a href="mailto:lucasgodeiro@ufersa.edu.br" class="email">lucasgodeiro@ufersa.edu.br</a></a>
</address>
<h4 class="date"><em>2019-03-06</em></h4>


<div id="TOC">
<ul>
<li><a href="#installation"><span class="toc-section-number">1</span> Installation</a></li>
<li><a href="#get_words-function"><span class="toc-section-number">2</span> get_words function</a><ul>
<li><a href="#arguments"><span class="toc-section-number">2.1</span> Arguments</a></li>
<li><a href="#value"><span class="toc-section-number">2.2</span> Value</a></li>
<li><a href="#example"><span class="toc-section-number">2.3</span> Example</a></li>
</ul></li>
<li><a href="#get_collocations-function"><span class="toc-section-number">3</span> get_collocations function</a><ul>
<li><a href="#arguments-1"><span class="toc-section-number">3.1</span> Arguments</a></li>
<li><a href="#value-1"><span class="toc-section-number">3.2</span> Value</a></li>
<li><a href="#example-1"><span class="toc-section-number">3.3</span> Example</a></li>
</ul></li>
<li><a href="#get_terms-function"><span class="toc-section-number">4</span> get_terms function</a><ul>
<li><a href="#arguments-2"><span class="toc-section-number">4.1</span> Arguments</a></li>
</ul></li>
<li><a href="#tf-idf-function"><span class="toc-section-number">5</span> tf-idf function</a><ul>
<li><a href="#arguments-3"><span class="toc-section-number">5.1</span> Arguments</a></li>
<li><a href="#value-2"><span class="toc-section-number">5.2</span> Value</a></li>
<li><a href="#example-2"><span class="toc-section-number">5.3</span> Example</a></li>
</ul></li>
<li><a href="#optimal-alphas-function"><span class="toc-section-number">6</span> optimal alphas function</a><ul>
<li><a href="#arguments-4"><span class="toc-section-number">6.1</span> Arguments</a></li>
<li><a href="#value-3"><span class="toc-section-number">6.2</span> Value</a></li>
<li><a href="#example-3"><span class="toc-section-number">6.3</span> Example</a></li>
</ul></li>
<li><a href="#tv-dictionary-function"><span class="toc-section-number">7</span> tv dictionary function</a><ul>
<li><a href="#arguments-5"><span class="toc-section-number">7.1</span> Arguments</a></li>
<li><a href="#value-4"><span class="toc-section-number">7.2</span> Value</a></li>
<li><a href="#example-4"><span class="toc-section-number">7.3</span> Example</a></li>
</ul></li>
<li><a href="#optimal-number-of-factors-function"><span class="toc-section-number">8</span> Optimal number of factors function</a><ul>
<li><a href="#arguments-6"><span class="toc-section-number">8.1</span> Arguments</a></li>
<li><a href="#value-5"><span class="toc-section-number">8.2</span> Value</a></li>
<li><a href="#example-5"><span class="toc-section-number">8.3</span> Example</a></li>
<li><a href="#arguments-7"><span class="toc-section-number">8.4</span> Arguments</a></li>
<li><a href="#value-6"><span class="toc-section-number">8.5</span> Value</a></li>
<li><a href="#example-6"><span class="toc-section-number">8.6</span> Example</a></li>
</ul></li>
<li><a href="#text-forecast-function"><span class="toc-section-number">9</span> Text Forecast function</a><ul>
<li><a href="#arguments-8"><span class="toc-section-number">9.1</span> Arguments</a></li>
<li><a href="#value-7"><span class="toc-section-number">9.2</span> Value</a></li>
<li><a href="#example-7"><span class="toc-section-number">9.3</span> Example</a></li>
</ul></li>
<li><a href="#text-nowcast-function"><span class="toc-section-number">10</span> Text Nowcast function</a><ul>
<li><a href="#arguments-9"><span class="toc-section-number">10.1</span> Arguments</a></li>
<li><a href="#value-8"><span class="toc-section-number">10.2</span> Value</a></li>
<li><a href="#example-8"><span class="toc-section-number">10.3</span> Example</a></li>
</ul></li>
<li><a href="#top-terms-function"><span class="toc-section-number">11</span> Top Terms function</a><ul>
<li><a href="#arguments-10"><span class="toc-section-number">11.1</span> Arguments</a></li>
<li><a href="#value-9"><span class="toc-section-number">11.2</span> Value</a></li>
<li><a href="#example-9"><span class="toc-section-number">11.3</span> Example</a></li>
</ul></li>
<li><a href="#tv-sentiment-index-function"><span class="toc-section-number">12</span> TV sentiment index function</a><ul>
<li><a href="#arguments-11"><span class="toc-section-number">12.1</span> Arguments</a></li>
<li><a href="#value-10"><span class="toc-section-number">12.2</span> Value</a></li>
<li><a href="#example-10"><span class="toc-section-number">12.3</span> Example</a></li>
</ul></li>
<li><a href="#tv-sentiment-index-function-using-all-positive-and-negative-coefficients."><span class="toc-section-number">13</span> TV sentiment index function using all positive and negative coefficients.</a><ul>
<li><a href="#arguments-12"><span class="toc-section-number">13.1</span> Arguments</a></li>
<li><a href="#value-11"><span class="toc-section-number">13.2</span> Value</a></li>
<li><a href="#example-11"><span class="toc-section-number">13.3</span> Example</a></li>
</ul></li>
<li><a href="#references">References</a></li>
</ul>
</div>

<p>This vignettes shows the functions and examples of the <strong>TextForecast</strong> package. The package functions are based on the <span class="citation">Lima, Godeiro, and Mohsin (2018)</span> paper and <span class="citation">Godeiro (2018)</span> Ph.D. thesis.</p>
<div id="installation" class="section level1">
<h1><span class="header-section-number">1</span> Installation</h1>
<p>You can install the released version of TextForecast from github with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(devtools)</a>
<a class="sourceLine" id="cb1-3" title="3">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;lucasgodeiro/TextForecast&quot;</span>)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw">install.packages</span>(<span class="st">&quot;TextForecast&quot;</span>)</a></code></pre></div>
</div>
<div id="get_words-function" class="section level1">
<h1><span class="header-section-number">2</span> get_words function</h1>
<p>This function counts the words of the texts in the PDF format.</p>
<div id="arguments" class="section level2">
<h2><span class="header-section-number">2.1</span> Arguments</h2>
<p><strong>corpus_dates:</strong> A vector of characters indicating the subfolders where are located the texts.</p>
<p><strong>ntrms:</strong> maximum numbers of words that will be filtered by tf-idf. We rank the word by tf-idf in a decreasing order. Then, we select the words with the ntrms highest tf-idf.</p>
<p><strong>st:</strong> set 0 to stem the words and 1 otherwise.</p>
<p><strong>path_name:</strong> the folders path where the subfolders with the dates are located.</p>
<p><strong>language</strong> the texts language. Default is english.</p>
</div>
<div id="value" class="section level2">
<h2><span class="header-section-number">2.2</span> Value</h2>
<p>a list containing a matrix with the all words counting and another with a td-idf filtered words couting according to the ntrms.</p>
</div>
<div id="example" class="section level2">
<h2><span class="header-section-number">2.3</span> Example</h2>
<p>This is a basic example which shows you how todo a word counting from PDF files. The PDF files contains monthly financial News from The Wall Street Journal and The New York Times between 2017 and 2018.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co">## Example from function get_words. </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb2-3" title="3">st_year=<span class="dv">2017</span></a>
<a class="sourceLine" id="cb2-4" title="4">end_year=<span class="dv">2018</span></a>
<a class="sourceLine" id="cb2-5" title="5">path_name=<span class="kw">system.file</span>(<span class="st">&quot;news&quot;</span>,<span class="dt">package=</span><span class="st">&quot;TextForecast&quot;</span>)</a>
<a class="sourceLine" id="cb2-6" title="6">qt=<span class="kw">paste0</span>(<span class="kw">sort</span>(<span class="kw">rep</span>(<span class="kw">seq</span>(<span class="dt">from=</span>st_year,<span class="dt">to=</span>end_year,<span class="dt">by=</span><span class="dv">1</span>),<span class="dv">12</span>)),</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">c</span>(<span class="st">&quot;m1&quot;</span>,<span class="st">&quot;m2&quot;</span>,<span class="st">&quot;m3&quot;</span>,<span class="st">&quot;m4&quot;</span>,<span class="st">&quot;m5&quot;</span>,<span class="st">&quot;m6&quot;</span>,<span class="st">&quot;m7&quot;</span>,<span class="st">&quot;m8&quot;</span>,<span class="st">&quot;m9&quot;</span>,<span class="st">&quot;m10&quot;</span>,<span class="st">&quot;m11&quot;</span>,<span class="st">&quot;m12&quot;</span>))</a>
<a class="sourceLine" id="cb2-8" title="8">z_wrd=<span class="kw">get_words</span>(<span class="dt">corpus_dates=</span>qt[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>],<span class="dt">path_name=</span>path_name,<span class="dt">ntrms=</span><span class="dv">10</span>,<span class="dt">st=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb2-9" title="9">zz=z_wrd[[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw">head</span>(zz)</a></code></pre></div>
</div>
</div>
<div id="get_collocations-function" class="section level1">
<h1><span class="header-section-number">3</span> get_collocations function</h1>
<p>This function counts the collocations of the texts in the PDF format. The PDF files contains monthly financial News from The Wall Street Journal and The New York Times between 2017 and 2018.</p>
<div id="arguments-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Arguments</h2>
<p><strong>corpus_dates:</strong> a character vector indicating the subfolders where are located the texts.</p>
<p><strong>path_name:</strong> the folders path where the subfolders with the dates are located.</p>
<p><strong>ntrms:</strong> maximum numbers of collocations that will be filtered by tf-idf. We rank the collocations by tf-idf in a decreasing order. Then, after we select the words with the ntrms highest tf-idf.</p>
<p><strong>ngrams_number:</strong> integer indicating the size of the collocations. Defaults to 2, indicating to compute bigrams. If set to 3, will find collocations of bigrams and trigrams.</p>
<p><strong>min_freq:</strong> integer indicating the frequency of how many times a collocation should at least occur in the data in order to be returned.</p>
<p><strong>language</strong> the texts language. Default is english.</p>
</div>
<div id="value-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Value</h2>
<p>a list containing a matrix with the all collocations counting and another with a td-idf filtered collocations couting according to the ntrms.</p>
</div>
<div id="example-1" class="section level2">
<h2><span class="header-section-number">3.3</span> Example</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb3-2" title="2">st_year=<span class="dv">2017</span></a>
<a class="sourceLine" id="cb3-3" title="3">end_year=<span class="dv">2018</span></a>
<a class="sourceLine" id="cb3-4" title="4">path_name=<span class="kw">system.file</span>(<span class="st">&quot;news&quot;</span>,<span class="dt">package=</span><span class="st">&quot;TextForecast&quot;</span>)</a>
<a class="sourceLine" id="cb3-5" title="5">qt=<span class="kw">paste0</span>(<span class="kw">sort</span>(<span class="kw">rep</span>(<span class="kw">seq</span>(<span class="dt">from=</span>st_year,<span class="dt">to=</span>end_year,<span class="dt">by=</span><span class="dv">1</span>),<span class="dv">12</span>)),</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="kw">c</span>(<span class="st">&quot;m1&quot;</span>,<span class="st">&quot;m2&quot;</span>,<span class="st">&quot;m3&quot;</span>,<span class="st">&quot;m4&quot;</span>,<span class="st">&quot;m5&quot;</span>,<span class="st">&quot;m6&quot;</span>,<span class="st">&quot;m7&quot;</span>,<span class="st">&quot;m8&quot;</span>,<span class="st">&quot;m9&quot;</span>,<span class="st">&quot;m10&quot;</span>,<span class="st">&quot;m11&quot;</span>,<span class="st">&quot;m12&quot;</span>))</a>
<a class="sourceLine" id="cb3-7" title="7">z_coll=<span class="kw">get_collocations</span>(<span class="dt">corpus_dates=</span>qt[<span class="dv">1</span><span class="op">:</span><span class="dv">23</span>],<span class="dt">path_name=</span>path_name,</a>
<a class="sourceLine" id="cb3-8" title="8"><span class="dt">ntrms=</span><span class="dv">20</span>,<span class="dt">ngrams_number=</span><span class="dv">3</span>,<span class="dt">min_freq=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb3-9" title="9">zz=z_coll[[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#head(zz)</span></a>
<a class="sourceLine" id="cb3-11" title="11">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(zz, <span class="dv">23</span>))</a></code></pre></div>
</div>
</div>
<div id="get_terms-function" class="section level1">
<h1><span class="header-section-number">4</span> get_terms function</h1>
<p>This function counts the terms of the texts in the PDF format.</p>
<div id="arguments-2" class="section level2">
<h2><span class="header-section-number">4.1</span> Arguments</h2>
<p><strong>corpus_dates:</strong> a character vector indicating the subfolders where are located the texts.</p>
<p><strong>ntrms_words:</strong> maximum numbers of words that will be filtered by tf-idf. We rank the word by tf-idf in a decreasing order. Then, we select the words with the ntrms highest tf-idf.</p>
<p><strong>st:</strong> set 0 to stem the words and 1 otherwise.</p>
<p><strong>path.name:</strong> the folders path where the subfolders with the dates are located.</p>
<p><strong>ntrms_collocation:</strong> maximum numbers of collocations that will be filtered by tf-idf. We rank the collocations by tf-idf in a decreasing order. Then, after we select the words with the ntrms highest tf-idf.</p>
<p><strong>ngrams_number:</strong> integer indicating the size of the collocations. Defaults to 2, indicating to compute bigrams. If set to 3, will find collocations of bigrams and trigrams.</p>
<p><strong>min_freq:</strong> integer indicating the frequency of how many times a collocation should at least occur in the data in order to be returned.</p>
<p><strong>language</strong> the texts language. Default is english.</p>
<p>##Value a list containing a matrix with the all collocations and words couting and another with a td-idf filtered collocations and words counting according to the ntrms.</p>
<p>##Example</p>
<p>This function counts the words and collocations of the texts in the PDF format. The PDF files contains monthly financial News from The Wall Street Journal and The New York Times between 2017 and 2018.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb4-2" title="2">st_year=<span class="dv">2017</span></a>
<a class="sourceLine" id="cb4-3" title="3">end_year=<span class="dv">2018</span></a>
<a class="sourceLine" id="cb4-4" title="4">path_name=<span class="kw">system.file</span>(<span class="st">&quot;news&quot;</span>,<span class="dt">package=</span><span class="st">&quot;TextForecast&quot;</span>)</a>
<a class="sourceLine" id="cb4-5" title="5">qt=<span class="kw">paste0</span>(<span class="kw">sort</span>(<span class="kw">rep</span>(<span class="kw">seq</span>(<span class="dt">from=</span>st_year,<span class="dt">to=</span>end_year,<span class="dt">by=</span><span class="dv">1</span>),<span class="dv">12</span>)),</a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">c</span>(<span class="st">&quot;m1&quot;</span>,<span class="st">&quot;m2&quot;</span>,<span class="st">&quot;m3&quot;</span>,<span class="st">&quot;m4&quot;</span>,<span class="st">&quot;m5&quot;</span>,<span class="st">&quot;m6&quot;</span>,<span class="st">&quot;m7&quot;</span>,<span class="st">&quot;m8&quot;</span>,<span class="st">&quot;m9&quot;</span>,<span class="st">&quot;m10&quot;</span>,<span class="st">&quot;m11&quot;</span>,<span class="st">&quot;m12&quot;</span>))</a>
<a class="sourceLine" id="cb4-7" title="7">z_terms=<span class="kw">get_terms</span>(<span class="dt">corpus_dates=</span>qt[<span class="dv">1</span><span class="op">:</span><span class="dv">23</span>],<span class="dt">path.name=</span>path_name,<span class="dt">ntrms_words=</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb4-8" title="8"><span class="dt">ngrams_number=</span><span class="dv">3</span>,<span class="dt">st=</span><span class="dv">0</span>,<span class="dt">ntrms_collocation=</span><span class="dv">10</span>,<span class="dt">min_freq=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb4-9" title="9">zz=z_terms[[<span class="dv">2</span>]]</a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#head(zz,23)</span></a>
<a class="sourceLine" id="cb4-11" title="11">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(zz, <span class="dv">23</span>))</a></code></pre></div>
</div>
</div>
<div id="tf-idf-function" class="section level1">
<h1><span class="header-section-number">5</span> tf-idf function</h1>
<p>This function computes the terms tf-idf.</p>
<div id="arguments-3" class="section level2">
<h2><span class="header-section-number">5.1</span> Arguments</h2>
<p><strong>x:</strong> a input matrix x of terms counting.</p>
</div>
<div id="value-2" class="section level2">
<h2><span class="header-section-number">5.2</span> Value</h2>
<p>a list with the terms tf-idf and the terms tf-idf in descending order.</p>
</div>
<div id="example-2" class="section level2">
<h2><span class="header-section-number">5.3</span> Example</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3"> X=<span class="kw">as.matrix</span>(news_data[,<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(news_data)])</a>
<a class="sourceLine" id="cb5-4" title="4">  tf_idf=<span class="kw">tf_idf</span>(X)</a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="kw">head</span>(tf_idf[[<span class="dv">1</span>]])</a></code></pre></div>
</div>
</div>
<div id="optimal-alphas-function" class="section level1">
<h1><span class="header-section-number">6</span> optimal alphas function</h1>
<p>This functions computes the optimal alphas.</p>
<div id="arguments-4" class="section level2">
<h2><span class="header-section-number">6.1</span> Arguments</h2>
<p><strong>x:</strong> A matrix of variables to be selected by shrinkrage methods.</p>
<p><strong>w:</strong> Optional Argument. A matrix or vector of variables that cannot be selected(no shrinkrage).</p>
<p><strong>y:</strong> response variable.</p>
<p><strong>grid_alphas:</strong> a grid of alphas between 0 and 1.</p>
<p><strong>cont_folds:</strong> Set TRUE for contiguous folds used in time depedent data.</p>
<p><strong>family</strong> The glmnet family.</p>
</div>
<div id="value-3" class="section level2">
<h2><span class="header-section-number">6.2</span> Value</h2>
<p><strong>lambdas_opt:</strong> a vector with the optimal alpha and lambda.</p>
</div>
<div id="example-3" class="section level2">
<h2><span class="header-section-number">6.3</span> Example</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb6-2" title="2"> <span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"> <span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb6-5" title="5"> y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb6-6" title="6"> w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb6-7" title="7"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb6-8" title="8"> X=news_data[,<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(news_data)]</a>
<a class="sourceLine" id="cb6-9" title="9"> x=<span class="kw">as.matrix</span>(X)</a>
<a class="sourceLine" id="cb6-10" title="10"> grid_alphas=<span class="kw">seq</span>(<span class="dt">by=</span><span class="fl">0.05</span>,<span class="dt">to=</span><span class="fl">0.95</span>,<span class="dt">from=</span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb6-11" title="11"> cont_folds=<span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb6-12" title="12"> t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb6-13" title="13"> optimal_alphas=<span class="kw">optimal_alphas</span>(x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],y[<span class="dv">2</span><span class="op">:</span>t],grid_alphas,<span class="ot">TRUE</span>,<span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb6-14" title="14"> <span class="kw">print</span>(optimal_alphas)</a></code></pre></div>
</div>
</div>
<div id="tv-dictionary-function" class="section level1">
<h1><span class="header-section-number">7</span> tv dictionary function</h1>
<p>This functions selects from $X $ the most predictive terms $X^{} $ using supervised machine learning techniques(Elastic Net).</p>
<div id="arguments-5" class="section level2">
<h2><span class="header-section-number">7.1</span> Arguments</h2>
<p><strong>x:</strong> A matrix of variables to be selected by shrinkrage methods.</p>
<p><strong>w:</strong> Optional Argument. A matrix or vector of variables that cannot be selected(no shrinkrage).</p>
<p><strong>y:</strong> response variable.</p>
<p><strong>alpha:</strong> the alpha required in glmnet.</p>
<p><strong>lambda:</strong> the lambda required in glmnet.</p>
<p><strong>newx:</strong> Matrix that selection will applied. Useful for time series, when we need the observation at time t.</p>
<p><strong>family:</strong> the glmnet family.</p>
</div>
<div id="value-4" class="section level2">
<h2><span class="header-section-number">7.2</span> Value</h2>
<p>$ X_{t}^{}$: a list with the coefficients and a matrix with the most predictive terms.</p>
</div>
<div id="example-4" class="section level2">
<h2><span class="header-section-number">7.3</span> Example</h2>
<p>This example select the most predictive words from the news database. The news database contains the terms counting of the Wall street journal and the New York Times financial news.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"> <span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb7-2" title="2"> <span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"> <span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb7-4" title="4"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb7-5" title="5"> y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb7-6" title="6"> w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb7-7" title="7"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb7-8" title="8"> X=news_data[,<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(news_data)]</a>
<a class="sourceLine" id="cb7-9" title="9"> x=<span class="kw">as.matrix</span>(X)</a>
<a class="sourceLine" id="cb7-10" title="10"> grid_alphas=<span class="kw">seq</span>(<span class="dt">by=</span><span class="fl">0.05</span>,<span class="dt">to=</span><span class="fl">0.95</span>,<span class="dt">from=</span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb7-11" title="11"> cont_folds=<span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb7-12" title="12"> t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb7-13" title="13"> optimal_alphas=<span class="kw">optimal_alphas</span>(<span class="dt">x=</span>x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">w=</span>w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">grid_alphas=</span>grid_alphas,<span class="dt">cont_folds=</span><span class="ot">TRUE</span>,<span class="dt">family=</span><span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb7-14" title="14"> x_star=<span class="kw">tv_dictionary</span>(<span class="dt">x=</span>x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">w=</span>w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">alpha=</span>optimal_alphas[<span class="dv">1</span>],<span class="dt">lambda=</span>optimal_alphas[<span class="dv">2</span>],<span class="dt">newx=</span>x,<span class="dt">family=</span><span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb7-15" title="15"> optimal_alphas1=<span class="kw">optimal_alphas</span>(<span class="dt">x=</span>x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">grid_alphas=</span>grid_alphas,<span class="dt">cont_folds=</span><span class="ot">TRUE</span>,<span class="dt">family=</span><span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb7-16" title="16"> x_star1=<span class="kw">tv_dictionary</span>(<span class="dt">x=</span>x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">alpha=</span>optimal_alphas1[<span class="dv">1</span>],<span class="dt">lambda=</span>optimal_alphas1[<span class="dv">2</span>],<span class="dt">newx=</span>x,<span class="dt">family=</span><span class="st">&quot;gaussian&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="optimal-number-of-factors-function" class="section level1">
<h1><span class="header-section-number">8</span> Optimal number of factors function</h1>
<p>This function computes the optimal number of factors according to <span class="citation">Ahn and Horenstein (2013)</span>.</p>
<div id="arguments-6" class="section level2">
<h2><span class="header-section-number">8.1</span> Arguments</h2>
<p><strong>X:</strong> a input matrix X.</p>
<p><strong>kmax:</strong> the maximum number of factors.</p>
</div>
<div id="value-5" class="section level2">
<h2><span class="header-section-number">8.2</span> Value</h2>
<p>a list with the optimal factors.</p>
</div>
<div id="example-5" class="section level2">
<h2><span class="header-section-number">8.3</span> Example</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">data</span>(<span class="st">&quot;optimal_x&quot;</span>)</a>
<a class="sourceLine" id="cb8-3" title="3">optimal_factor &lt;-<span class="st"> </span>TextForecast<span class="op">::</span><span class="kw">optimal_factors</span>(optimal_x,<span class="dv">8</span>)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="kw">head</span>(optimal_factor[[<span class="dv">1</span>]])</a></code></pre></div>
<p>#Hard thresholding function</p>
<p>This function carries out the hard thresholding according to <span class="citation">Bai and Ng (2008)</span></p>
</div>
<div id="arguments-7" class="section level2">
<h2><span class="header-section-number">8.4</span> Arguments</h2>
<p><strong>x:</strong> the input matrix x.</p>
<p><strong>w:</strong> Optional Argument. The optional input matrix w, that cannot be selected.</p>
<p><strong>y:</strong> the response variable.</p>
<p><strong>p_value:</strong> the threshold p-value.</p>
<p><strong>newx:</strong> matrix that selection will applied. Useful for time series, when we need the observation at time t.</p>
</div>
<div id="value-6" class="section level2">
<h2><span class="header-section-number">8.5</span> Value</h2>
<p>the variables less than p-value.</p>
</div>
<div id="example-6" class="section level2">
<h2><span class="header-section-number">8.6</span> Example</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw">data</span>(<span class="st">&quot;optimal_factors&quot;</span>)</a>
<a class="sourceLine" id="cb9-4" title="4">y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb9-5" title="5">y=<span class="kw">as.vector</span>(y)</a>
<a class="sourceLine" id="cb9-6" title="6">w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb9-7" title="7">pc=<span class="kw">as.matrix</span>(optimal_factors)</a>
<a class="sourceLine" id="cb9-8" title="8">t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb9-9" title="9">news_factor &lt;-<span class="st"> </span><span class="kw">hard_thresholding</span>(<span class="dt">w=</span>w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],</a>
<a class="sourceLine" id="cb9-10" title="10"><span class="dt">x=</span>pc[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">p_value =</span> <span class="fl">0.01</span>,<span class="dt">newx =</span> pc)</a></code></pre></div>
</div>
</div>
<div id="text-forecast-function" class="section level1">
<h1><span class="header-section-number">9</span> Text Forecast function</h1>
<p>This functions computes the <span class="math inline">\(h\)</span> step ahead forecast based on textual and/or economic data.</p>
<div id="arguments-8" class="section level2">
<h2><span class="header-section-number">9.1</span> Arguments</h2>
<p><strong>x:</strong> the input matrix x.</p>
<p><strong>y:</strong> the response variable</p>
<p><strong>h:</strong> the forecast horizon</p>
<p><strong>intercept:</strong> TRUE for include intercept in the forecast equation.</p>
</div>
<div id="value-7" class="section level2">
<h2><span class="header-section-number">9.2</span> Value</h2>
<p>The h step ahead forecast</p>
</div>
<div id="example-7" class="section level2">
<h2><span class="header-section-number">9.3</span> Example</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb10-4" title="4">y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb10-5" title="5">w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb10-6" title="6"><span class="kw">data</span>(<span class="st">&quot;optimal_factors_data&quot;</span>)</a>
<a class="sourceLine" id="cb10-7" title="7">pc=<span class="kw">as.matrix</span>(optimal_factors)</a>
<a class="sourceLine" id="cb10-8" title="8">z=<span class="kw">cbind</span>(w,pc)</a>
<a class="sourceLine" id="cb10-9" title="9">fcsts=<span class="kw">text_forecast</span>(z,y,<span class="dv">1</span>,<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-10" title="10"><span class="kw">print</span>(fcsts)</a></code></pre></div>
</div>
</div>
<div id="text-nowcast-function" class="section level1">
<h1><span class="header-section-number">10</span> Text Nowcast function</h1>
<p>This function computes the nowcast h=0.</p>
<div id="arguments-9" class="section level2">
<h2><span class="header-section-number">10.1</span> Arguments</h2>
<p><strong>x:</strong> the input matrix x.</p>
<p><strong>y:</strong> the response variable</p>
<p><strong>intercept:</strong> TRUE for include intercept in the forecast equation.</p>
</div>
<div id="value-8" class="section level2">
<h2><span class="header-section-number">10.2</span> Value</h2>
<p>the nowcast h=0 for the variable y.</p>
</div>
<div id="example-8" class="section level2">
<h2><span class="header-section-number">10.3</span> Example</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"> <span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb11-2" title="2"> <span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb11-3" title="3"> <span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb11-5" title="5"> y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb11-6" title="6"> w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb11-7" title="7"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb11-8" title="8"> <span class="kw">data</span>(<span class="st">&quot;optimal_factors_data&quot;</span>)</a>
<a class="sourceLine" id="cb11-9" title="9"> pc=<span class="kw">as.matrix</span>(optimal_factors)</a>
<a class="sourceLine" id="cb11-10" title="10"> z=<span class="kw">cbind</span>(w,pc)</a>
<a class="sourceLine" id="cb11-11" title="11"> t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb11-12" title="12"> ncsts=<span class="kw">text_nowcast</span>(z,y[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>)],<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb11-13" title="13"> <span class="kw">print</span>(ncsts)</a></code></pre></div>
</div>
</div>
<div id="top-terms-function" class="section level1">
<h1><span class="header-section-number">11</span> Top Terms function</h1>
<p>This function computes the highest k predictive words by using the highest absolute coefficient value.</p>
<div id="arguments-10" class="section level2">
<h2><span class="header-section-number">11.1</span> Arguments</h2>
<p><strong>x:</strong> the input matrix of terms to be selected.</p>
<p><strong>w:</strong> optional argument. the input matrix of structured data to not be selected.</p>
<p><strong>y:</strong> the response variable</p>
<p><strong>alpha:</strong> the glmnet alpha</p>
<p><strong>lambda:</strong> the glmnet lambda</p>
<p><strong>k:</strong> the k top terms</p>
<p><strong>wordcloud:</strong> set TRUE to plot the wordcloud</p>
<p><strong>max.words:</strong> the maximum number of words in the wordcloud</p>
<p><strong>scale:</strong> the wordcloud size.</p>
<p><strong>rot.per:</strong> wordcloud proportion 90 degree terms</p>
<p><strong>family:</strong> glmnet family</p>
</div>
<div id="value-9" class="section level2">
<h2><span class="header-section-number">11.2</span> Value</h2>
<p>the top k terms and the corresponding wordcloud.</p>
</div>
<div id="example-9" class="section level2">
<h2><span class="header-section-number">11.3</span> Example</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb12-2" title="2"> <span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb12-3" title="3"> <span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb12-4" title="4"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb12-5" title="5"> y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb12-6" title="6"> w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb12-7" title="7"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb12-8" title="8"> X=news_data[,<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(news_data)]</a>
<a class="sourceLine" id="cb12-9" title="9"> x=<span class="kw">as.matrix</span>(X)</a>
<a class="sourceLine" id="cb12-10" title="10"> grid_alphas=<span class="kw">seq</span>(<span class="dt">by=</span><span class="fl">0.05</span>,<span class="dt">to=</span><span class="fl">0.95</span>,<span class="dt">from=</span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb12-11" title="11"> cont_folds=<span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb12-12" title="12"> t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb12-13" title="13"> optimal_alphas=<span class="kw">optimal_alphas</span>(x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],</a>
<a class="sourceLine" id="cb12-14" title="14"> y[<span class="dv">2</span><span class="op">:</span>t],grid_alphas,<span class="ot">TRUE</span>,<span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb12-15" title="15"> top_trms&lt;-<span class="st"> </span><span class="kw">top_terms</span>(x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],y[<span class="dv">2</span><span class="op">:</span>t],optimal_alphas[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb12-16" title="16">optimal_alphas[[<span class="dv">2</span>]],<span class="dv">10</span>,<span class="ot">TRUE</span>,<span class="dv">10</span>,<span class="kw">c</span>(<span class="dv">2</span>,<span class="fl">0.3</span>),.<span class="dv">15</span>,<span class="st">&quot;gaussian&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="tv-sentiment-index-function" class="section level1">
<h1><span class="header-section-number">12</span> TV sentiment index function</h1>
<div id="arguments-11" class="section level2">
<h2><span class="header-section-number">12.1</span> Arguments</h2>
<p><strong>x:</strong> A matrix of variables to be selected by shrinkrage methods.</p>
<p><strong>w:</strong> Optional Argument. A matrix of variables to be selected by shrinkrage methods.</p>
<p><strong>y:</strong> the response variable.</p>
<p><strong>alpha:</strong> the alpha required in glmnet.</p>
<p><strong>lambda:</strong> the lambda required in glmnet.</p>
<p><strong>newx:</strong> Matrix that selection will applied. Useful for time series, when we need the observation at time t.</p>
<p><strong>family:</strong> the glmnet family.</p>
<p><strong>k:</strong> the highest positive and negative coefficients to be used.</p>
</div>
<div id="value-10" class="section level2">
<h2><span class="header-section-number">12.2</span> Value</h2>
<p>The time-varying sentiment index. The index is based on the k word/term counting and is computed using: tv_index=(pos-neg)/(pos+neg).</p>
</div>
<div id="example-10" class="section level2">
<h2><span class="header-section-number">12.3</span> Example</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">library</span>(TextForecast)</a>
<a class="sourceLine" id="cb13-2" title="2"> <span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"> <span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb13-4" title="4"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb13-5" title="5"> y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb13-6" title="6"> w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb13-7" title="7"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb13-8" title="8"> X=news_data[,<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(news_data)]</a>
<a class="sourceLine" id="cb13-9" title="9"> x=<span class="kw">as.matrix</span>(X)</a>
<a class="sourceLine" id="cb13-10" title="10"> grid_alphas=<span class="kw">seq</span>(<span class="dt">by=</span><span class="fl">0.05</span>,<span class="dt">to=</span><span class="fl">0.95</span>,<span class="dt">from=</span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb13-11" title="11"> cont_folds=<span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb13-12" title="12"> t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb13-13" title="13"> optimal_alphas=<span class="kw">optimal_alphas</span>(x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],</a>
<a class="sourceLine" id="cb13-14" title="14"> y[<span class="dv">2</span><span class="op">:</span>t],grid_alphas,<span class="ot">TRUE</span>,<span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb13-15" title="15">  tv_index &lt;-<span class="st"> </span><span class="kw">tv_sentiment_index</span>(x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],w[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],</a>
<a class="sourceLine" id="cb13-16" title="16"> y[<span class="dv">2</span><span class="op">:</span>t],optimal_alphas[[<span class="dv">1</span>]],optimal_alphas[[<span class="dv">2</span>]],x,<span class="st">&quot;gaussian&quot;</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb13-17" title="17"> <span class="kw">head</span>(tv_index)</a></code></pre></div>
</div>
</div>
<div id="tv-sentiment-index-function-using-all-positive-and-negative-coefficients." class="section level1">
<h1><span class="header-section-number">13</span> TV sentiment index function using all positive and negative coefficients.</h1>
<p>Unlike the TV sentiment index functions, this function uses all positive and negative coefficiens to compute the index.</p>
<div id="arguments-12" class="section level2">
<h2><span class="header-section-number">13.1</span> Arguments</h2>
<p><strong>x:</strong> A matrix of variables to be selected by shrinkrage methods.</p>
<p><strong>w:</strong> Optional Argument. A matrix of variables to be selected by shrinkrage methods.</p>
<p><strong>y:</strong> the response variable.</p>
<p><strong>alpha:</strong> the alpha required in glmnet.</p>
<p><strong>lambda:</strong> the lambda required in glmnet.</p>
<p><strong>newx:</strong> Matrix that selection will applied. Useful for time series, when we need the observation at time t.</p>
<p><strong>family:</strong> the glmnet family.</p>
<p><strong>k_mov_avg:</strong> The moving average order.</p>
<p><strong>type_mov_avg:</strong> The type of moving average. See .</p>
</div>
<div id="value-11" class="section level2">
<h2><span class="header-section-number">13.2</span> Value</h2>
<p>A list with the net, postive and negative sentiment index. The net time-varying sentiment index. The index is based on the word/term counting and is computed using: tv_index=(pos-neg)/(pos+neg). The postive sentiment index is computed using: tv_index_pos=pos/(pos+neg) and the negative tv_index_neg=neg/(pos+neg).</p>
</div>
<div id="example-11" class="section level2">
<h2><span class="header-section-number">13.3</span> Example</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"> <span class="kw">set.seed</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb14-2" title="2"> <span class="kw">data</span>(<span class="st">&quot;stock_data&quot;</span>)</a>
<a class="sourceLine" id="cb14-3" title="3"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb14-4" title="4"> y=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb14-5" title="5"> w=<span class="kw">as.matrix</span>(stock_data[,<span class="dv">3</span>])</a>
<a class="sourceLine" id="cb14-6" title="6"> <span class="kw">data</span>(<span class="st">&quot;news_data&quot;</span>)</a>
<a class="sourceLine" id="cb14-7" title="7"> X=news_data[,<span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(news_data)]</a>
<a class="sourceLine" id="cb14-8" title="8"> x=<span class="kw">as.matrix</span>(X)</a>
<a class="sourceLine" id="cb14-9" title="9"> grid_alphas=<span class="fl">0.15</span></a>
<a class="sourceLine" id="cb14-10" title="10"> cont_folds=<span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb14-11" title="11"> t=<span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb14-12" title="12"> optimal_alphas=<span class="kw">optimal_alphas</span>(<span class="dt">x=</span>x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],</a>
<a class="sourceLine" id="cb14-13" title="13">                               <span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">grid_alphas=</span>grid_alphas,<span class="dt">cont_folds=</span><span class="ot">TRUE</span>,<span class="dt">family=</span><span class="st">&quot;gaussian&quot;</span>)</a>
<a class="sourceLine" id="cb14-14" title="14"> tv_idx=<span class="kw">tv_sentiment_index_all_coefs</span>(<span class="dt">x=</span>x[<span class="dv">1</span><span class="op">:</span>(t<span class="dv">-1</span>),],<span class="dt">y=</span>y[<span class="dv">2</span><span class="op">:</span>t],<span class="dt">alpha =</span> optimal_alphas[<span class="dv">1</span>],<span class="dt">lambda =</span> optimal_alphas[<span class="dv">2</span>],<span class="dt">newx=</span>x,</a>
<a class="sourceLine" id="cb14-15" title="15">                                  <span class="dt">scaled =</span> <span class="ot">TRUE</span>,<span class="dt">k_mov_avg =</span> <span class="dv">4</span>,<span class="dt">type_mov_avg =</span> <span class="st">&quot;s&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-ahn2013eigenvalue">
<p>Ahn, Seung C, and Alex R Horenstein. 2013. “Eigenvalue Ratio Test for the Number of Factors.” <em>Econometrica</em> 81 (3): 1203–27.</p>
</div>
<div id="ref-bai2008forecasting">
<p>Bai, Jushan, and Serena Ng. 2008. “Forecasting Economic Time Series Using Targeted Predictors.” <em>Journal of Econometrics</em> 146 (2): 304–17.</p>
</div>
<div id="ref-godeiro2018ensaios">
<p>Godeiro, Lucas. 2018. “Ensaios Sobre Modelos de Previsao Economica.”</p>
</div>
<div id="ref-limagodeiromohsin2018">
<p>Lima, Luiz Renato, Lucas Lúcio Godeiro, and Mohammed Mohsin. 2018. “Time-Varying Dictionary and the Predictive Power of Fed Minutes.” In <em>2018 Ciret Biennial International Conference</em>.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
